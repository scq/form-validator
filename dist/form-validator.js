!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.FormValidator=t():e.FormValidator=t()}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t){var r,n;function a(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;e.exports=(n=r=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"handleSubmit",function(e){e.preventDefault(),r.submitAttempted=!0,r.validate(),r.valid&&r.el.submit()}),l(this,"validate",function(){var t=r.readForm(Object.keys(r.validations));r.valid=!0,r.errors={};for(var n=Object.entries(r.validations),a=0;a<n.length;a++){var o=i(n[a],2),u=o[0],l=o[1],s=!0,f=!1,c=void 0;try{for(var d,v=l.validators[Symbol.iterator]();!(s=(d=v.next()).done);s=!0){var m=d.value;if(!m.validate(t[u],t)){!1,r.valid=!1;var y=m.messageData?m.messageData():{};y.label=l.label;var h=r.formatMessage(m.messages[e.language],y);r.errors[u]=h;break}}}catch(e){f=!0,c=e}finally{try{s||null==v.return||v.return()}finally{if(f)throw c}}}r.submitAttempted&&r.showErrors()}),this.config=t,this.validations=t.fields(e.validators)}return u(e,null,[{key:"init",value:function(t,r){var n=new e(r);return n.attach(t),n}},{key:"registerValidator",value:function(t,r){e.validators[t]=r}}]),u(e,[{key:"attach",value:function(e){this.el=e,e.addEventListener("submit",this.handleSubmit),e.addEventListener("change",this.validate),e.addEventListener("keyup",this.validate)}},{key:"showErrors",value:function(){for(var e=Object.keys(this.validations),t=0;t<e.length;t++){var r=e[t];this.fieldError(r,this.errors[r]||null)}this.config.formError&&this.config.formError(this.el,!this.valid)}},{key:"readForm",value:function(e){var t={},r=!0,n=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(r=(o=u.next()).done);r=!0){var l=o.value,s=a(this.el.querySelectorAll("[name="+l+"]")).map(function(e){if("INPUT"===e.nodeName)switch(e.type.toLowerCase()){case"checkbox":return e.checked?e.value:void 0;case"radio":throw new Error("Not implemented");default:return e.value}if("SELECT"===e.nodeName)return e.value});t[l]=s.length>1?s.filter(function(e){return void 0!==e}):s[0]}}catch(e){n=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(n)throw i}}return t}},{key:"fieldError",value:function(e,t){var r=this.el.querySelector("[name="+e+"]");r&&(null!==t?r.setAttribute("aria-invalid","true"):r.removeAttribute("aria-invalid"),this.config.fieldError&&this.config.fieldError(r,t))}},{key:"formatMessage",value:function(e,t){for(var r=Object.entries(t),n=0;n<r.length;n++){var a=i(r[n],2),o=a[0],u=a[1];e=e.replace("{"+o+"}",u)}return e}}]),e}(),l(r,"language","en"),l(r,"validators",{required:function(){return{validate:function(e){return!!e},messages:{en:"{label} is required"}}},email:function(){return{validate:function(e){return s.test(e)},messages:{en:"{label} must be a valid email"}}},minLength:function(e){return{validate:function(t){return t.length>=e},messageData:function(){return{min:e}},messages:{en:"{label} must be at least {min} characters long"}}},minSelections:function(e){return{validate:function(t){return t.length>=e},messageData:function(){return{min:e}},messages:{en:"You must choose at least {min} items"}}}}),n)}])});